!function(){function e(e,t){let o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function t(e){let t=e,o=document.querySelectorAll("#"+t.selector+" tbody > tr > td > a");for(let e=0;e<o.length;e++){let n=o[e].getAttribute("data-operations"),l={addEvent:null,deleteEvent:null,refElem:null};if("new"===n){let n=t.add.bind(t);l.addEvent=n,l.refElem=o[e],o[e].addEventListener("click",n)}if("delete"===n){let n=t.delete.bind(t);l.deleteEvent=n,o[e].addEventListener("click",n)}null!=l.refElem&&t.eventArr.push(l)}}function o(e){let t=e,o=document.querySelectorAll("#"+t.selector+" tbody tr"),n=document.querySelectorAll("#"+t.selector+" tbody > tr > td > a");var l=t.maxRowCount,r=t.minRowCount;n.forEach((function(e){var t=e.getAttribute("data-operations");null!=t&&0!=t.length&&("new"==t.trim()&&(l==o.length?e.classList.add("disabled"):e.classList.remove("disabled")),"delete"==t.trim()&&(r==o.length?e.classList.add("disabled"):e.classList.remove("disabled")))}))}this.MultiColmTableName=function(){this.minRowCount=0,this.maxRowCount=0,this.selector="",this.eventArr=[];let n={selector:"",minRow:0,maxRow:0};arguments[0]&&"object"==typeof arguments[0]&&(this.options=e(n,arguments[0])),this.selector=this.options.selector,this.minRowCount=this.options.minRow,this.maxRowCount=this.options.maxRow;let l=document.querySelector("#"+this.selector+" tbody");new Sortable(l,{handle:".op-move",animation:150}),t(this),o(this)},MultiColmTableName.prototype.add=function(e){e.preventDefault();let n=e.target.parentNode;n.classList.add("rotate");let l=document.querySelector("#"+this.selector).getAttribute("data-name"),r=document.querySelectorAll("#"+this.selector+" tbody tr"),i=this;if(0==i.maxRowCount||i.maxRowCount>0&&r.length<i.maxRowCount){let a=0;for(let e=0;e<r.length;e++)a=Math.max(a,r[e].getAttribute("data-rowid"));let s="action=mcwCreateNewRow&name="+l+"&maxRowId="+a,d=new XMLHttpRequest;return d.open("POST",window.location.href),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.onload=function(){if(200===d.status){let l,r=d.responseText;try{l=JSON.parse(r)}catch(e){l={content:r}}null===l?l={content:""}:"object"!=typeof l&&(l={content:r});let a=l.content.replace("<table>","").replace("</table>","");e.target.parentNode.parentNode.parentNode.after(function(e){let t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}(a)),function(e){let t=e;for(let e=0;e<t.eventArr.length;e++)t.eventArr[e].refElem.removeEventListener("click",t.eventArr[e].addEvent),t.eventArr[e].refElem.removeEventListener("click",t.eventArr[e].deleteEvent)}(i),t(i),n.classList.remove("rotate"),o(i)}else 200!==d.status&&(console.log(d.status),n.classList.remove("rotate"))},void d.send(encodeURI(s))}return n.classList.remove("rotate"),o(i),!1},MultiColmTableName.prototype.delete=function(e){e.preventDefault();let t=document.querySelectorAll("#"+this.selector+" tbody tr");if(1!=t.length)return this.minRowCount>0&&t.length<=this.minRowCount?void 0:(e.target.parentNode.parentNode.parentNode.remove(),void o(this))}}();
//# sourceMappingURL=multicolumnwizard_fe.min.js.map