!function(){function e(e,t){let o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function t(e){let t=e,o=document.querySelectorAll("#"+t.selector+" tbody > tr > td > a");for(let e=0;e<o.length;e++){let n=o[e].getAttribute("data-operations"),r={addEvent:null,deleteEvent:null,refElem:null};if("new"===n){let n=t.add.bind(t);r.addEvent=n,r.refElem=o[e],o[e].addEventListener("click",n)}if("delete"===n){let n=t.delete.bind(t);r.deleteEvent=n,o[e].addEventListener("click",n)}null!=r.refElem&&t.eventArr.push(r)}}this.MultiColmTableName=function(){this.minRowCount=0,this.maxRowCount=0,this.selector="",this.eventArr=[];let o={selector:"",minRow:0,maxRow:0};arguments[0]&&"object"==typeof arguments[0]&&(this.options=e(o,arguments[0])),this.selector=this.options.selector,this.minRowCount=this.options.minRow,this.maxRowCount=this.options.maxRow;let n=document.querySelector("#"+this.selector+" tbody");new Sortable(n,{handle:".op-move",animation:150}),t(this)},MultiColmTableName.prototype.add=function(e){e.preventDefault();let o=e.target.parentNode;o.classList.add("rotate");let n=document.querySelector("#"+this.selector).getAttribute("data-name"),r=document.querySelectorAll("#"+this.selector+" tbody tr"),l=this;if(0==l.maxRowCount||l.maxRowCount>0&&r.length<l.maxRowCount){let i=0;for(let e=0;e<r.length;e++)i=Math.max(i,r[e].getAttribute("data-rowid"));let a="action=mcwCreateNewRow&name="+n+"&maxRowId="+i,s=new XMLHttpRequest;return s.open("POST",window.location.href),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.onload=function(){if(200===s.status){let n,r=s.responseText;try{n=JSON.parse(r)}catch(e){n={content:r}}null===n?n={content:""}:"object"!=typeof n&&(n={content:r});let i=n.content.replace("<table>","").replace("</table>","");e.target.parentNode.parentNode.parentNode.after(function(e){let t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}(i)),function(e){let t=e;for(let e=0;e<t.eventArr.length;e++)t.eventArr[e].refElem.removeEventListener("click",t.eventArr[e].addEvent),t.eventArr[e].refElem.removeEventListener("click",t.eventArr[e].deleteEvent)}(l),t(l),o.classList.remove("rotate")}else 200!==s.status&&(console.log(s.status),o.classList.remove("rotate"))},void s.send(encodeURI(a))}return o.classList.remove("rotate"),!1},MultiColmTableName.prototype.delete=function(e){e.preventDefault();let t=document.querySelectorAll("#"+this.selector+" tbody tr");if(1!=t.length)return this.minRowCount>0&&t.length<=this.minRowCount?void 0:void e.target.parentNode.parentNode.parentNode.remove()},MultiColmTableName.prototype.move=function(){}}();
//# sourceMappingURL=multicolumnwizard_fe.min.js.map